define hostgroup {
	hostgroup_name chaosdorf-hosts
	alias Chaosdorf hosts
}

define hostgroup {
	hostgroup_name chaosdorf-root
	alias Chaosdorf VM server
}

define hostgroup {
	hostgroup_name chaosdorf-vm
	alias Chaosdorf VM
}

define host {
	name chaosdorf-host
	use generic-host
	hostgroups ssh-servers, debian-servers, chaosdorf-hosts
	contact_groups + chaosdorf-admins
	register 0
}

define service {
	name chaosdorf-service
	use generic-service
	contact_groups + chaosdorf-admins
	register 0
}

define servicedependency {
	name chaosdorf-ssh
	hostgroup_name chaosdorf-hosts
	service_description SSH
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
	register 0
}

define servicedependency {
	name chaosdorf-frontend-ssh
	host_name frontend.chaosdorf.de
	service_description SSH
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
	register 0
}

define servicedependency {
	name chaosdorf-frontend-http
	host_name frontend.chaosdorf.de
	service_description HTTP
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
	register 0
}

define servicedependency {
	name chaosdorf-frontend-https
	host_name frontend.chaosdorf.de
	service_description HTTPS
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
	register 0
}

define servicedependency {
	name chaosdorf-figurehead-ssh
	host_name chaosdorf.dyndns.org
	service_description SSH
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
	register 0
}

define servicedependency {
	name chaosdorf-root-ssh
	hostgroup_name chaosdorf-root
	service_description SSH
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
	register 0
}

define host {
	use chaosdorf-host
	host_name vm.chaosdorf.de
	alias vm.chaosdorf.de
	address 217.69.82.242
	hostgroups + chaosdorf-root
	parents alpha
}

define host {
	use chaosdorf-host
	host_name frontend.chaosdorf.de
	alias frontend.chaosdorf.de
	address 217.69.82.244
	parents vm.chaosdorf.de
	hostgroups + http-servers, https-servers, mail-servers, chaosdorf-vm
}

define host {
	use chaosdorf-host
	host_name backend.chaosdorf.de
	alias backend.chaosdorf.de
	address 217.69.82.245
	parents vm.chaosdorf.de
	hostgroups + chaosdorf-vm
}

define host {
	use chaosdorf-host
	host_name shells.chaosdorf.de
	alias shells.chaosdorf.de
	address 217.69.82.243
	parents vm.chaosdorf.de
	hostgroups + chaosdorf-vm
}

define host {
	use chaosdorf-host
	host_name chaosdorf.dyndns.org
	alias figurehead
	address chaosdorf.dyndns.org
	parents alpha
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description IMAPS
	check_command check_simap_4
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description POP3S
	check_command check_spop_4
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Mail Queue
	check_command check_by_ssh_fc!mailq_postfix
}

define servicedependency {
	use chaosdorf-frontend-ssh
	dependent_service_description Mail Queue
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Ikiwiki: intercensor
	check_command check_by_ssh_fc!ikiwiki_ic
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-ssh
	dependent_service_description Ikiwiki: intercensor
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Ikiwiki: intern
	check_command check_by_ssh_fc!ikiwiki_intern
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-ssh
	dependent_service_description Ikiwiki: intern
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Ikiwiki: www
	check_command check_by_ssh_fc!ikiwiki_www
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-ssh
	dependent_service_description Ikiwiki: www
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Intern wiki
	check_command check_chaosdorf_intern_content!/!Chaosdorf Wiki
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-https
	dependent_service_description Intern wiki
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Intern gitweb
	check_command check_chaosdorf_intern_content!/git/website!www.chaosdorf.de ikiwiki source
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-https
	dependent_service_description Intern gitweb
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Intern webmail
	check_command check_chaosdorf_intern_content!/webmail/!Welcome to RoundCube Webmail
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-https
	dependent_service_description Intern webmail
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Intern HTTP Stats
	check_command check_chaosdorf_intern_content_age!/http-stats.html!information!125m
	check_interval 60
}

define servicedependency {
	use chaosdorf-frontend-https
	dependent_service_description Intern HTTP Stats
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Intern ticket tracker
	check_command check_chaosdorf_intern_content!/tickets/!List of issues
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-https
	dependent_service_description Intern ticket tracker
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Intern munin
	check_command check_chaosdorf_intern_content_age!/munin/!generated by!10m
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-https
	dependent_service_description Intern munin
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Not Blacklisted
	check_command check_rbl
	check_interval 60
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description No open relay
	check_command check_by_ssh_fc_r!steel.derf0.net!check_cccd_no_relay
	check_interval 60
}

define servicedependency {
	host_name steel.derf0.net
	service_description SSH
	dependent_host_name frontend.chaosdorf.de
	dependent_service_description No open relay
	execution_failure_criteria w,u,c
	notification_failure_criteria w,u,c
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description SSL Certificate
	check_command check_by_ssh_fc!certificate
	check_interval 600
}

define servicedependency {
	use chaosdorf-frontend-ssh
	dependent_service_description SSL Certificate
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description www.chaosdorf.de
	check_command check_http_vhost_content!www.chaosdorf.de!Chaos Computer Club
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-http
	dependent_service_description www.chaosdorf.de
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description www.chaosdorf.de/planet up-to-date
	check_command check_http_vhost_url_age!www.chaosdorf.de!/planet/!32m
	check_interval 20
}

define servicedependency {
	use chaosdorf-frontend-http
	dependent_service_description www.chaosdorf.de/planet up-to-date
}

define service {
	use chaosdorf-service
	host_name frontend.chaosdorf.de
	service_description Websites
	check_command check_chaosdorf_websites
	check_interval 30
}

define servicedependency {
	use chaosdorf-frontend-http
	dependent_service_description Websites
}

define service {
	use chaosdorf-service
	host_name chaosdorf.dyndns.org
	service_description Disk: /home
	check_command check_by_ssh_fc!disk_home
}

define servicedependency {
	use chaosdorf-figurehead-ssh
	dependent_service_description Disk: /home
}

define service {
	use chaosdorf-service
	host_name chaosdorf.dyndns.org
	service_description SMART: sdb
	check_command check_by_ssh_fc!smart_sdb
	check_interval 10
}

define servicedependency {
	use chaosdorf-figurehead-ssh
	dependent_service_description SMART: sdb
}

define service {
	use chaosdorf-service
	host_name chaosdorf.dyndns.org
	service_description hddtemp: sdb
	check_command check_by_ssh_fc!hddtemp_sdb
	check_interval 10
}

define servicedependency {
	use chaosdorf-figurehead-ssh
	dependent_service_description hddtemp: sdb
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description SSH password login disabled
	check_command check_ssh_no_password_login
	check_interval 15
}

define servicedependency {
	use chaosdorf-figurehead-ssh
	dependent_service_description SSH password login disabled
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Packages
	servicegroups apt
	check_command check_by_ssh_fc!packages
	flap_detection_enabled 0
	check_interval 10
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Packages
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Users
	check_command check_by_ssh_fc!users
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Users
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Load
	check_command check_by_ssh_fc!load
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Load
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Processes
	check_command check_by_ssh_fc!processes
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Processes
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Kernel Image
	check_command check_by_ssh_fc!kernel
	check_interval 60
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Kernel Image
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Git: /etc
	check_command check_by_ssh_fc!git_etc
	check_interval 60
	retry_interval 60
	max_check_attempts 9
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Git: /etc
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Git: /usr/local
	check_command check_by_ssh_fc!git_usr_local
	check_interval 60
	retry_interval 60
	max_check_attempts 9
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Git: /usr/local
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Running Process Libs
	check_command check_by_ssh_fc!libs
	check_interval 10
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Running Process Libs
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-hosts
	service_description Disk: /
	check_command check_by_ssh_fc!disk_root
}

define servicedependency {
	use chaosdorf-ssh
	dependent_service_description Disk: /
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description Disk: /boot
	check_command check_by_ssh_fc!disk_boot
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description Disk: /boot
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description Sensors
	check_command check_by_ssh_fc!sensors
	check_interval 10
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description Sensors
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description SMART: sda
	check_command check_by_ssh_fc!smart_sda
	check_interval 10
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description SMART: sda
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description SMART: sdb
	check_command check_by_ssh_fc!smart_sdb
	check_interval 10
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description SMART: sdb
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description RAID
	check_command check_by_ssh_fc!raid
	check_interval 10
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description RAID
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description hddtemp: sda
	check_command check_by_ssh_fc!hddtemp_sda
	check_interval 10
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description hddtemp: sda
}

define service {
	use chaosdorf-service
	hostgroup_name chaosdorf-root
	service_description hddtemp: sdb
	check_command check_by_ssh_fc!hddtemp_sdb
	check_interval 10
}

define servicedependency {
	use chaosdorf-root-ssh
	dependent_service_description hddtemp: sdb
}
